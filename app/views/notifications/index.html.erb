<% provide(:title, 'Notifications') %>
<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h1>Notifications (<%= @notifications.count %>)</h1>
      <% @notifications.each do |notification| %>
          <div class="line">
            <div class="timestamp">
              <p> <%= link_to notification.follower.name,
                              notification.follower %>
                solicita seguir você.
                | <%= time_ago_in_words(notification.created_at) %> ago</p>
            </div>
            <% unless notification.notification_read %>
                <div class="row">
                  <div class="btn-group">
                    <div class="col-md-6">
                      <%= form_for(current_user.passive_relationships.build,
                                   remote: true) do |f| %>
                          <%= hidden_field_tag :follower_id,
                                               notification.follower_id %>
                          <%= hidden_field_tag :notification_id,
                                               notification.id %>
                          <%= f.submit "Approve", style: 'color:#FFFFFF;',
                                       class: 'btn btn-success' %>
                      <% end %>
                    </div>
                    <div class="col-md-6">
                      <!--O botão de ignorar uma notificação poderia ser
                      implementado com o "button_to", ou até mesmo o "link_to",
                      que se vc passar a mesma opção "method: :delete", ambos
                      funcionarão da mesma forma. O button_to vai automaticamente
                      criar o form pra vc, e o link_to vai simular o form
                      automaticamente através de JS do Rails.-->
                      <%= form_for notification, html: {method: :delete} do |f| %>
                          <%= f.submit "Ignore", style: 'color:#FFFFFF;',
                                       class: 'btn btn-danger' %>
                          <!--verificar se esta funfanfo \/-->
                          <%= link_to "Ignore", notification, style: 'color:#FFFFFF;',
                                      class: 'btn btn-danger pull-right',
                                      method: :delete, data: {confirm: "You sure?"} %>
                      <% end %>
                    </div>
                  </div>
                </div>
            <% end %>
          </div>
      <% end %>
    </div>
  </div>
</div>